<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸ“˜ Class Routine & Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f7f9fc;
      color: #333;
      padding: 20px;
    }
    .container {
      max-width: 1000px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #2a4d9b;
      margin-bottom: 20px;
    }
    .day-card, .event-section {
      background: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }
    h2 {
      color: #1d387a;
      margin-bottom: 12px;
    }
    .class-item, .event-item {
      background: #edf1fb;
      padding: 10px 15px;
      border-radius: 12px;
      margin: 8px 0;
      font-size: 0.95rem;
    }
    .class-item span, .event-item span {
      font-weight: 600;
      display: block;
      color: #2a4d9b;
    }
    input {
      padding: 8px;
      margin: 6px 4px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      padding: 8px 14px;
      background-color: #2a4d9b;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ“˜ My Class Routine & Dashboard</h1>

    <!-- Routine -->
    <div class="day-card"><h2>Sunday</h2>
      <div class="class-item"><span>10:15 AM - 11:45 AM</span>Principles of Accounting (ACC-1101), FBS Tower-CR 1201</div>
      <div class="class-item"><span>02:00 PM - 03:30 PM</span>Business Mathematics (ALD-1101), FBS Tower-CR 1102</div>
    </div>
    <div class="day-card"><h2>Tuesday</h2>
      <div class="class-item"><span>08:30 AM - 10:00 AM</span>Professional Ethics (GED-1103), FBS Tower-CR 1101</div>
      <div class="class-item"><span>10:15 AM - 11:45 AM</span>Intro to Business (GED-1101), FBS Tower-CR 1102</div>
      <div class="class-item"><span>2:00 PM - 03:30 PM</span>Bangladesh Studies (GED-1102), FBS Tower-CR 1102</div>
      <div class="class-item"><span>03:45 PM - 05:15 PM</span>Business Math (ALD-1101), FBS Tower-CR 1201</div>
    </div>
    <div class="day-card"><h2>Wednesday</h2>
      <div class="class-item"><span>10:15 AM - 11:45 AM</span>Principles of Accounting (ACC-1101), FBS Tower-CR 1203</div>
      <div class="class-item"><span>02:00 PM - 03:30 PM</span>Intro to Business (GED-1101), FBS Tower-CR 1201</div>
    </div>
    <div class="day-card"><h2>Thursday</h2>
      <div class="class-item"><span>10:15 AM - 11:45 AM</span>Ethics & Psychology (GED-1103), FBS Tower-CR 1102</div>
      <div class="class-item"><span>02:00 PM - 03:30 PM</span>Bangladesh Studies (GED-1102), FBS Tower-CR 1101</div>
    </div>

    <!-- Upcoming Events -->
    <div class="event-section">
      <h2>ðŸ“… Upcoming Exams & Assignments</h2>
      <input type="text" id="eventTitle" placeholder="Exam or Assignment Title">
      <input type="date" id="eventDate">
      <input type="password" id="adminKey" placeholder="Admin Secret Key">
      <button onclick="addEvent()">Add Event</button>
      <div id="eventList"></div>
    </div>
  </div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script>
    // âœ… Your Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyAwGmVEAJO49iLkfASobN4aqhXBqSP-BBs",
      authDomain: "classschedulerapp-af122.firebaseapp.com",
      databaseURL: "https://classschedulerapp-af122-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "classschedulerapp-af122",
      storageBucket: "classschedulerapp-af122.appspot.com",
      messagingSenderId: "781740188469",
      appId: "1:781740188469:web:92379d80d3b78a2c80227c"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const ADMIN_SECRET = "letmein"; // change this to your own secret

    function addEvent() {
      const title = document.getElementById("eventTitle").value;
      const date = document.getElementById("eventDate").value;
      const adminKey = document.getElementById("adminKey").value;

      if (adminKey !== ADMIN_SECRET) {
        alert("Unauthorized: Incorrect admin key");
        return;
      }
      if (!title || !date) {
        alert("Please fill in all fields");
        return;
      }

      const id = Date.now();
      const data = {
        title,
        date,
        timestamp: new Date(date).getTime()
      };
      db.ref("events/" + id).set(data);

      new Notification("ðŸ“Œ New Event Added", {
        body: `${title} on ${new Date(date).toDateString()}`
      });
    }

    function loadEvents() {
      const container = document.getElementById("eventList");
      container.innerHTML = "";
      const now = Date.now();

      db.ref("events").on("value", snapshot => {
        const events = snapshot.val();
        container.innerHTML = "";

        for (let key in events) {
          const { title, date, timestamp } = events[key];

          if (timestamp < now) {
            // auto-delete old events
            db.ref("events/" + key).remove();
            continue;
          }

          const div = document.createElement("div");
          div.className = "event-item";
          div.innerHTML = `<span>${new Date(date).toDateString()}</span>${title}`;
          container.appendChild(div);
        }
      });
    }

    // Request browser notification permission
    if ('Notification' in window && Notification.permission !== "granted") {
      Notification.requestPermission();
    }

    // Start
    loadEvents();
  </script>
</body>
</html>
